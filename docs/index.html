<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×œ×•×— ×‘×§×¨×” ×× ×™×” ×—×›× - ×—×•×¨×£ 25</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html { direction: rtl; }

        body {
            font-family: 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: linear-gradient(135deg, #eff6ff 0%, #f1f5f9 100%);
            min-height: 100vh;
            padding: 24px;
        }

        .container { max-width: 90rem; margin: 0 auto; }
        .header { margin-bottom: 32px; }
        .header h1 { font-size: 36px; font-weight: 700; color: #1e293b; margin-bottom: 8px; }
        .header p { color: #475569; font-size: 16px; }

        .tab-buttons {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 10px 16px;
            border-radius: 8px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .tab-btn.active { background-color: #2563eb; color: white; box-shadow: 0 4px 6px rgba(37, 99, 235, 0.3); }
        .tab-btn.inactive { background-color: white; color: #475569; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); }
        .tab-btn.inactive:hover { background-color: #f1f5f9; }

        .alert-banner {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border-right: 4px solid #dc2626;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
            font-weight: 600;
            color: #7f1d1d;
        }

        .alert-banner.warning { 
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
            border-right-color: #f59e0b;
            color: #78350f;
        }

        .alert-banner.success {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            border-right-color: #16a34a;
            color: #166534;
        }

        .recommendations-section {
            background: white;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .rec-title { font-size: 20px; font-weight: 700; color: #1e293b; margin-bottom: 16px; }

        .rec-item {
            background: #f8fafc;
            padding: 12px 16px;
            border-radius: 6px;
            margin-bottom: 12px;
            border-right: 4px solid #2563eb;
            font-size: 14px;
            line-height: 1.6;
        }

        .rec-item.urgent { border-right-color: #dc2626; background: #fef2f2; }
        .rec-item.opportunity { border-right-color: #16a34a; background: #f0fdf4; }
        .rec-item.dead-stock { border-right-color: #f59e0b; background: #fef3c7; }

        .grid-4 { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin-bottom: 24px; }
        .grid-2 { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 24px; }

        .card {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .card-header { display: flex; align-items: center; justify-content: space-between; }
        .card-stat-label { color: #64748b; font-size: 14px; }
        .card-stat-value { font-size: 32px; font-weight: 700; color: #1e293b; margin-top: 8px; }
        .card-stat-value.green { color: #16a34a; }
        .card-stat-value.red { color: #dc2626; }
        .card-stat-value.purple { color: #a855f7; }
        .card-icon { font-size: 48px; }

        .abc-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 12px;
        }

        .abc-a { background: #fee2e2; color: #7f1d1d; }
        .abc-b { background: #fef3c7; color: #78350f; }
        .abc-c { background: #dbeafe; color: #1e3a8a; }

        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 14px; }
        thead { background-color: #f8fafc; border-bottom: 2px solid #e2e8f0; }
        th { text-align: right; padding: 12px; font-weight: 600; color: #475569; }
        td { padding: 12px; border-bottom: 1px solid #e2e8f0; color: #334155; }
        tbody tr:hover { background-color: #f8fafc; }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 4px; font-weight: 500; font-size: 12px; }
        .badge-red { background-color: #fee2e2; color: #7f1d1d; }
        .badge-orange { background-color: #fed7aa; color: #7c2d12; }
        .badge-green { background-color: #dcfce7; color: #166534; }
        .badge-blue { background-color: #dbeafe; color: #1e40af; }

        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .text-green { color: #16a34a; }
        .text-red { color: #dc2626; }
        .text-orange { color: #ea580c; }
        .text-right { text-align: right; }
        .text-center { text-align: center; }
        .text-sm { font-size: 13px; }
        .text-xs { font-size: 12px; }
        .mb-4 { margin-bottom: 16px; }
        .mt-4 { margin-top: 16px; }

        .item-row {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: linear-gradient(to left, #eff6ff, white);
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .item-number { font-size: 24px; font-weight: 700; color: #2563eb; width: 32px; }
        .item-flex-1 { flex: 1; }
        .item-text { font-weight: 600; color: #1e293b; }
        .item-subtext { font-size: 13px; color: #64748b; margin-top: 4px; }
        .item-right { text-align: left; }
        .item-sales { font-weight: 700; color: #16a34a; }

        .progress-bar { width: 100%; height: 8px; background-color: #e2e8f0; border-radius: 9999px; overflow: hidden; margin-top: 4px; }
        .progress-fill { height: 100%; background-color: #2563eb; }

        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 16px; }
        .kpi-box { background: #f8fafc; padding: 12px; border-radius: 6px; border-right: 3px solid #2563eb; }
        .kpi-label { font-size: 12px; color: #64748b; margin-bottom: 4px; }
        .kpi-value { font-size: 20px; font-weight: 700; color: #1e293b; }

        .search-box {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 16px;
            text-align: right;
        }

        .search-box:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); }

        .threshold-container { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; flex-wrap: wrap; }
        .threshold-input { padding: 6px 12px; border: 1px solid #cbd5e1; border-radius: 4px; font-size: 14px; }

        .status-indicator { font-size: 20px; margin-right: 8px; }

        .model-card {
            border-radius: 8px;
            padding: 24px;
            background: white;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 16px;
            cursor: pointer;
        }

        .model-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px; }
        .model-info h3 { font-size: 18px; font-weight: 700; color: #1e293b; }
        .model-info p { font-size: 14px; color: #64748b; margin-top: 4px; }
        .model-right { text-align: left; }
        .model-sales { font-size: 24px; font-weight: 700; color: #16a34a; }
        .model-label { font-size: 12px; color: #94a3b8; }

        .color-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-top: 12px; }
        .color-item {
            background-color: #f8fafc;
            padding: 12px;
            border-radius: 4px;
            border-right: 3px solid #2563eb;
        }

        .color-name { font-weight: 600; color: #1e293b; margin-bottom: 4px; }
        .color-stats { display: flex; justify-content: space-between; font-size: 12px; }

        .urgency-critical { color: #dc2626; font-weight: 700; }
        .urgency-warning { color: #f59e0b; font-weight: 700; }

        .action-btn {
            background: #2563eb;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .action-btn:hover { background: #1d4ed8; }
        .action-btn.secondary { background: #64748b; }
        .action-btn.secondary:hover { background: #475569; }

        .days-left { font-weight: 700; }
        .days-left.red { color: #dc2626; }
        .days-left.orange { color: #f59e0b; }
        .days-left.green { color: #16a34a; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        const DATA = [
            {"ModelCode":"261100A","ModelDesc":"××›× ×¡ ×’'×¨×–×™ ××©×•×‘×¥","Type":"×‘× ×™× ×©×‘×ª","Color":"×‘×•×¨×“×• ××©×•×‘×¥","Collection":"×—×•×¨×£ 25","TotalSales":291,"OpeningStock":308,"CurrentStock":17,"StockTurnover":0.945,"Profit":0.767,"Model":"261100","WeeklySales":[0,0,8,26,131,99,10,13,3,0,2,1,-2,0,0]},
            {"ModelCode":"261100B","ModelDesc":"××›× ×¡ ×’'×¨×–×™ ××©×•×‘×¥","Type":"×‘× ×™× ×©×‘×ª","Color":"OLIVE ×–×™×ª","Collection":"×—×•×¨×£ 25","TotalSales":364,"OpeningStock":373,"CurrentStock":9,"StockTurnover":0.976,"Profit":0.767,"Model":"261100","WeeklySales":[0,0,4,20,45,170,75,29,12,1,3,1,2,2,0]},
            {"ModelCode":"261104A","ModelDesc":"×¡×¨×¤×Ÿ ×’'×¨×–×™ ××©×•×‘×¥","Type":"×‘× ×•×ª ×©×‘×ª","Color":"×‘×•×¨×“×• ××©×•×‘×¥","Collection":"×—×•×¨×£ 25","TotalSales":319,"OpeningStock":386,"CurrentStock":67,"StockTurnover":0.826,"Profit":0.755,"Model":"261104","WeeklySales":[0,1,8,30,70,79,28,68,14,0,5,5,5,6,6]},
            {"ModelCode":"261145C","ModelDesc":"×§×¨×“×™×’×Ÿ ×‘×™×™×‘×™","Type":"×ª×™× ×•×§×•×ª ×©×‘×ª","Color":"×‘×•×¨×“×• bordo","Collection":"×—×•×¨×£ 25","TotalSales":170,"OpeningStock":219,"CurrentStock":49,"StockTurnover":0.776,"Profit":0.750,"Model":"261145","WeeklySales":[1,2,2,12,22,34,27,42,15,0,4,5,1,3,2]},
            {"ModelCode":"261175A","ModelDesc":"×—×¦××™×ª ×˜×¤×˜ ×›×™×•×•×¦×™","Type":"× ×¢×¨×•×ª ×©×‘×ª","Color":"×©×—×•×¨ black","Collection":"×—×•×¨×£ 25","TotalSales":412,"OpeningStock":444,"CurrentStock":32,"StockTurnover":0.928,"Profit":0.746,"Model":"261175","WeeklySales":[1,15,16,28,39,64,28,79,74,10,23,13,13,9,4]},
            {"ModelCode":"261175B","ModelDesc":"×—×¦××™×ª ×˜×¤×˜ ×›×™×•×•×¦×™","Type":"× ×¢×¨×•×ª ×©×‘×ª","Color":"×™×¨×•×§ GREEN","Collection":"×—×•×¨×£ 25","TotalSales":275,"OpeningStock":288,"CurrentStock":13,"StockTurnover":0.955,"Profit":0.746,"Model":"261175","WeeklySales":[0,2,20,21,51,37,6,70,41,2,10,4,3,8,0]},
            {"ModelCode":"261112C","ModelDesc":"×—×¦××™×ª ×¡××˜×Ÿ","Type":"× ×¢×¨×•×ª ×©×‘×ª","Color":"×™×¨×•×§ GREEN","Collection":"×—×•×¨×£ 25","TotalSales":210,"OpeningStock":249,"CurrentStock":39,"StockTurnover":0.843,"Profit":0.790,"Model":"261112","WeeklySales":[0,0,1,11,19,71,42,41,16,-2,3,4,2,2,0]},
            {"ModelCode":"261149A","ModelDesc":"×¡×˜×Ÿ ×× ×•××¨ × ×¢×¨×•×ª","Type":"× ×¢×¨×•×ª ×©×‘×ª","Color":"","Collection":"×—×•×¨×£ 25","TotalSales":203,"OpeningStock":645,"CurrentStock":442,"StockTurnover":0.315,"Profit":0.742,"Model":"261149","WeeklySales":[4,2,15,7,25,48,17,50,25,0,2,1,5,2,3]},
            {"ModelCode":"261168F","ModelDesc":"××›× ×¡ ×©×‘×ª ×¦××¨ ×“×§","Type":"×‘× ×™× ×©×‘×ª","Color":"OLIVE ×–×™×ª","Collection":"×—×•×¨×£ 25","TotalSales":257,"OpeningStock":352,"CurrentStock":95,"StockTurnover":0.730,"Profit":0.744,"Model":"261168","WeeklySales":[0,3,2,7,22,63,32,79,34,-1,0,3,6,7,-1]},
            {"ModelCode":"261124B","ModelDesc":"×©××œ×ª ×˜×•×œ ×§×•××•×ª","Type":"×‘× ×•×ª ×©×‘×ª","Color":"×¤×¨×—×•× ×™ FLORAL","Collection":"×—×•×¨×£ 25","TotalSales":343,"OpeningStock":513,"CurrentStock":170,"StockTurnover":0.669,"Profit":0.711,"Model":"261124","WeeklySales":[0,0,94,59,99,48,4,19,0,10,10,0,0,0,0]},
        ];

        function calculateABCCategory(totalSales, cumulativePercent) {
            if (cumulativePercent <= 0.8) return { label: 'A', class: 'abc-a', desc: '××•×¦×¨ ×—×™×•× ×™ (80% ×”××›×™×¨×•×ª)' };
            if (cumulativePercent <= 0.95) return { label: 'B', class: 'abc-b', desc: '××•×¦×¨ ××©× ×™ (15% ×”××›×™×¨×•×ª)' };
            return { label: 'C', class: 'abc-c', desc: '××•×¦×¨ ×©×•×œ×™ (5% ×”××›×™×¨×•×ª)' };
        }

        function calculateDaysRemaining(currentStock, weeklySales) {
            const avgWeeklySales = weeklySales.reduce((a, b) => a + b, 0) / weeklySales.length;
            if (avgWeeklySales <= 0) return 999;
            return Math.round((currentStock / avgWeeklySales) * 7);
        }

        function calculateReorderPoint(weeklySales, leadTimeDays = 14) {
            const avgWeeklySales = weeklySales.reduce((a, b) => a + b, 0) / weeklySales.length;
            const leadTimeWeeks = leadTimeDays / 7;
            const buffer = avgWeeklySales * 1; // 1 week buffer
            return Math.ceil(avgWeeklySales * leadTimeWeeks + buffer);
        }

        function InventoryDashboard() {
            const [searchTerm, setSearchTerm] = useState('');
            const [activeTab, setActiveTab] = useState('dashboard');
            const [lowStockThreshold, setLowStockThreshold] = useState(50);
            const [selectedModel, setSelectedModel] = useState(null);

            // ABC Analysis
            const abcAnalysis = useMemo(() => {
                const sorted = [...DATA].sort((a, b) => b.TotalSales - a.TotalSales);
                const totalSales = sorted.reduce((sum, item) => sum + item.TotalSales, 0);
                let cumulative = 0;

                return sorted.map(item => {
                    cumulative += item.TotalSales;
                    const percent = cumulative / totalSales;
                    const abc = calculateABCCategory(item.TotalSales, percent);
                    return { ...item, abc, percent: cumulative / totalSales };
                });
            }, []);

            // Calculate advanced metrics
            const productsWithMetrics = useMemo(() => {
                return abcAnalysis.map(item => {
                    const daysRemaining = calculateDaysRemaining(item.CurrentStock, item.WeeklySales);
                    const reorderPoint = calculateReorderPoint(item.WeeklySales);
                    const avgWeeklySales = item.WeeklySales.reduce((a, b) => a + b, 0) / item.WeeklySales.length;
                    const isDeadStock = item.CurrentStock > 100 && item.TotalSales < 10;
                    const isOverstock = item.CurrentStock > 50 && item.StockTurnover < 0.2;
                    const isUrgent = daysRemaining < 7;
                    const hasOpportunity = item.abc.label === 'A' && item.StockTurnover > 0.8;

                    return {
                        ...item,
                        daysRemaining,
                        reorderPoint,
                        avgWeeklySales,
                        isDeadStock,
                        isOverstock,
                        isUrgent,
                        hasOpportunity,
                        totalProfit: item.Profit * item.TotalSales
                    };
                });
            }, [abcAnalysis]);

            // Get alerts and recommendations
            const alerts = useMemo(() => {
                const urgent = productsWithMetrics.filter(p => p.isUrgent).slice(0, 3);
                const deadStock = productsWithMetrics.filter(p => p.isDeadStock).slice(0, 3);
                const opportunities = productsWithMetrics.filter(p => p.hasOpportunity).slice(0, 3);

                return { urgent, deadStock, opportunities };
            }, [productsWithMetrics]);

            // Top performers
            const topSellers = useMemo(() => {
                return [...productsWithMetrics].sort((a, b) => b.TotalSales - a.TotalSales).slice(0, 10);
            }, [productsWithMetrics]);

            const topProfit = useMemo(() => {
                return [...productsWithMetrics].sort((a, b) => b.totalProfit - a.totalProfit).slice(0, 8);
            }, [productsWithMetrics]);

            // Summary KPIs
            const kpis = useMemo(() => {
                const totalValue = productsWithMetrics.reduce((sum, p) => sum + (p.CurrentStock * p.Profit * 100), 0);
                const avgRotation = productsWithMetrics.reduce((sum, p) => sum + p.StockTurnover, 0) / productsWithMetrics.length;
                const abcCounts = {
                    A: productsWithMetrics.filter(p => p.abc.label === 'A').length,
                    B: productsWithMetrics.filter(p => p.abc.label === 'B').length,
                    C: productsWithMetrics.filter(p => p.abc.label === 'C').length,
                };

                return {
                    totalValue: Math.round(totalValue),
                    avgRotation: Math.round(avgRotation * 100),
                    lowStockCount: productsWithMetrics.filter(p => p.CurrentStock <= lowStockThreshold).length,
                    urgentCount: alerts.urgent.length,
                    abcCounts
                };
            }, [productsWithMetrics, alerts, lowStockThreshold]);

            const filteredData = useMemo(() => {
                return productsWithMetrics.filter(item => 
                    item.ModelCode.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    item.ModelDesc.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    (item.Color && item.Color.toLowerCase().includes(searchTerm.toLowerCase()))
                );
            }, [searchTerm, productsWithMetrics]);

            return (
                <div className="container">
                    <div className="header">
                        <h1>ğŸ“Š ×œ×•×— ×‘×§×¨×” ×× ×™×” ×—×›×</h1>
                        <p>× ×™×”×•×œ ××™× ×˜×œ×™×’× ×˜×™ ×©×œ ××œ××™ ×—×•×¨×£ 25</p>
                    </div>

                    <div className="tab-buttons">
                        {[
                            { id: 'dashboard', label: 'ğŸ¯ ×“×™×¨×•×’ ×•× ×ª×•× ×™×' },
                            { id: 'recommendations', label: 'ğŸ’¡ ×”××œ×¦×•×ª ×—×›××•×ª' },
                            { id: 'abc', label: 'ğŸ“Š × ×™×ª×•×— ABC' },
                            { id: 'top-sellers', label: 'ğŸ” ××›×™×¨×•×ª ××•×‘×™×œ×•×ª' },
                            { id: 'dead-stock', label: 'âš ï¸ ××œ××™ ××§×•×¤×' },
                            { id: 'all-items', label: 'ğŸ“ ×›×œ ×”×¤×¨×™×˜×™×' },
                        ].map(tab => (
                            <button
                                key={tab.id}
                                onClick={() => setActiveTab(tab.id)}
                                className={`tab-btn ${activeTab === tab.id ? 'active' : 'inactive'}`}
                            >
                                {tab.label}
                            </button>
                        ))}
                    </div>

                    {/* Dashboard Tab */}
                    {activeTab === 'dashboard' && (
                        <>
                            {/* Critical Alerts */}
                            {alerts.urgent.length > 0 && (
                                <div className="alert-banner">
                                    ğŸš¨ ×—×™×¨×•×: {alerts.urgent.length} ×¤×¨×™×˜×™× ×‘×¡×›× ×ª ×—×•×¡×¨ {alerts.urgent.map(a => a.ModelCode).join(', ')}
                                </div>
                            )}

                            {/* KPI Cards */}
                            <div className="grid-4">
                                <div className="card">
                                    <div className="card-header">
                                        <div>
                                            <div className="card-stat-label">×¡×”×´×› ×”×¤×¨×™×˜×™×</div>
                                            <div className="card-stat-value">{DATA.length}</div>
                                        </div>
                                        <div className="card-icon">ğŸ“¦</div>
                                    </div>
                                </div>
                                <div className="card">
                                    <div className="card-header">
                                        <div>
                                            <div className="card-stat-label">×¡×”×´×› ××›×™×¨×•×ª</div>
                                            <div className="card-stat-value green">{productsWithMetrics.reduce((sum, p) => sum + p.TotalSales, 0)}</div>
                                        </div>
                                        <div className="card-icon">ğŸ“ˆ</div>
                                    </div>
                                </div>
                                <div className="card">
                                    <div className="card-header">
                                        <div>
                                            <div className="card-stat-label">×‘×¡×›× ×ª ×—×•×¡×¨</div>
                                            <div className="card-stat-value red">{kpis.urgentCount}</div>
                                        </div>
                                        <div className="card-icon">ğŸš¨</div>
                                    </div>
                                </div>
                                <div className="card">
                                    <div className="card-header">
                                        <div>
                                            <div className="card-stat-label">×¡×™×‘×•×‘ ×××•×¦×¢</div>
                                            <div className="card-stat-value purple">{kpis.avgRotation}%</div>
                                        </div>
                                        <div className="card-icon">ğŸ”„</div>
                                    </div>
                                </div>
                            </div>

                            {/* ABC Distribution */}
                            <div className="card mb-4">
                                <h3 className="rec-title">×”×ª×¤×œ×’×•×ª ABC (× ×™×ª×•×— ×¤×¨×˜×•)</h3>
                                <div className="kpi-grid">
                                    <div className="kpi-box" style={{ borderRightColor: '#dc2626' }}>
                                        <div className="kpi-label">×§×˜×’×•×¨×™×” A (80% ××›×™×¨×•×ª)</div>
                                        <div className="kpi-value">{kpis.abcCounts.A} ×¤×¨×™×˜×™×</div>
                                    </div>
                                    <div className="kpi-box" style={{ borderRightColor: '#f59e0b' }}>
                                        <div className="kpi-label">×§×˜×’×•×¨×™×” B (15% ××›×™×¨×•×ª)</div>
                                        <div className="kpi-value">{kpis.abcCounts.B} ×¤×¨×™×˜×™×</div>
                                    </div>
                                    <div className="kpi-box" style={{ borderRightColor: '#3b82f6' }}>
                                        <div className="kpi-label">×§×˜×’×•×¨×™×” C (5% ××›×™×¨×•×ª)</div>
                                        <div className="kpi-value">{kpis.abcCounts.C} ×¤×¨×™×˜×™×</div>
                                    </div>
                                </div>
                                <p className="text-sm mt-4" style={{ color: '#64748b' }}>
                                    ğŸ¯ ×××§×“: 20% ××”×¤×¨×™×˜×™× (A) ××—×¨××™× ×œ-80% ××”××›×™×¨×•×ª. × ×™×”×•×œ ×–×” ×—×™×•× ×™ ×œ×ª×–×¨×™× ××–×•×× ×™×.
                                </p>
                            </div>

                            {/* Urgent Actions */}
                            <div className="recommendations-section">
                                <h3 className="rec-title">âš¡ ×¤×¢×•×œ×•×ª ×“×—×•×¤×•×ª</h3>
                                {alerts.urgent.length === 0 ? (
                                    <p className="text-sm" style={{ color: '#64748b' }}>âœ… ××™×Ÿ ×¤×¨×™×˜×™× ×‘×¡×›× ×ª ×—×•×¡×¨</p>
                                ) : (
                                    alerts.urgent.map(item => (
                                        <div key={item.ModelCode} className="rec-item urgent">
                                            <strong>{item.ModelCode} - {item.ModelDesc}</strong> ({item.Color})
                                            <div style={{ marginTop: '8px', fontSize: '13px' }}>
                                                â±ï¸ ×™××™× × ×•×ª×¨×™×: <span className="days-left red">{item.daysRemaining}</span> | 
                                                ××œ××™: <span style={{ fontWeight: 700 }}>{item.CurrentStock}</span> | 
                                                ××—×™×¨ ×–×¨×™×–: {Math.ceil(item.reorderPoint)} ×™×—×™×“×•×ª
                                            </div>
                                            <button className="action-btn mt-4" style={{ marginRight: '0' }}>×”×–××Ÿ ×¢×›×©×™×•</button>
                                        </div>
                                    ))
                                )}
                            </div>
                        </>
                    )}

                    {/* Recommendations Tab */}
                    {activeTab === 'recommendations' && (
                        <div className="recommendations-section">
                            <h3 className="rec-title">ğŸ’¡ ×”××œ×¦×•×ª ×—×›××•×ª ×œ× ×™×”×•×œ ××œ××™</h3>

                            <h4 style={{ fontSize: '16px', fontWeight: 600, marginTop: '24px', marginBottom: '12px', color: '#1e293b' }}>ğŸš¨ ×—×™×•× ×™ - ×¢×“×›×Ÿ ×”×™×•×</h4>
                            {alerts.urgent.map(item => (
                                <div key={item.ModelCode} className="rec-item urgent">
                                    <strong>ğŸ”´ {item.ModelCode}</strong> - ×¡×›× ×ª ×—×•×¡×¨ ×¢××•×§!
                                    <div style={{ marginTop: '8px', fontSize: '13px', lineHeight: '1.6' }}>
                                        ××›×™×¨×•×ª ×©×‘×•×¢×™×•×ª: ~{Math.round(item.avgWeeklySales)} ×™×—×™×“×•×ª | 
                                        ××œ××™: {item.CurrentStock} | 
                                        <strong className="text-red"> {item.daysRemaining} ×™××™× ×¢×“ ×—×•×¡×¨</strong>
                                        <br/>
                                        âœ <strong>×”×–××Ÿ {Math.ceil(item.reorderPoint * 1.5)} ×™×—×™×“×•×ª ××™×“×™×ª</strong>
                                    </div>
                                </div>
                            ))}

                            <h4 style={{ fontSize: '16px', fontWeight: 600, marginTop: '24px', marginBottom: '12px', color: '#1e293b' }}>ğŸŒŸ ×”×–×“×× ×•×™×•×ª - ×”×’×“×œ ××›×™×¨×•×ª</h4>
                            {alerts.opportunities.map(item => (
                                <div key={item.ModelCode} className="rec-item opportunity">
                                    <strong>ğŸŸ¢ {item.ModelCode}</strong> - ×–×” ××•×¦×¨ ×”×–×”×‘ ×©×œ×š!
                                    <div style={{ marginTop: '8px', fontSize: '13px', lineHeight: '1.6' }}>
                                        ×¡×™×‘×•×‘: {Math.round(item.StockTurnover * 100)}% | 
                                        ××›×™×¨×•×ª: {item.TotalSales} | 
                                        ×§×˜×’×•×¨×™×”: <span className={`abc-badge ${item.abc.class}`}>{item.abc.label}</span>
                                        <br/>
                                        âœ <strong>×”×’×“×œ ××œ××™ ×‘-30%, ×©×§×•×œ ×¦×‘×¢×™× × ×•×¡×¤×™×</strong>
                                    </div>
                                </div>
                            ))}

                            <h4 style={{ fontSize: '16px', fontWeight: 600, marginTop: '24px', marginBottom: '12px', color: '#1e293b' }}>âš ï¸ ××œ××™ ×ª×§×•×¢ - ×“×¤×•×§ ××—×™×¨</h4>
                            {alerts.deadStock.map(item => (
                                <div key={item.ModelCode} className="rec-item dead-stock">
                                    <strong>ğŸŸ  {item.ModelCode}</strong> - ××œ××™ ××§×•×¤×!
                                    <div style={{ marginTop: '8px', fontSize: '13px', lineHeight: '1.6' }}>
                                        ××œ××™ ×¢×•×“×£: {item.CurrentStock} ×™×—×™×“×•×ª | 
                                        ××›×™×¨×•×ª: {item.TotalSales} ×‘×œ×‘×“ | 
                                        ×›×¡×£ ×ª×§×•×¢: ~{Math.round(item.CurrentStock * item.Profit * 50)}â‚ª
                                        <br/>
                                        âœ <strong>×”×•×¨×“ ××—×™×¨ 20-30%, ×©×§×•×œ clearance</strong>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}

                    {/* ABC Analysis Tab */}
                    {activeTab === 'abc' && (
                        <div className="card">
                            <h3 className="rec-title">ğŸ“Š × ×™×ª×•×— ABC - ×¢×“×™×¤×•×™×•×ª × ×™×”×•×œ</h3>
                            <div className="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>×§×•×“</th>
                                            <th>×©×</th>
                                            <th>×§×˜×’×•×¨×™×”</th>
                                            <th className="text-center">××›×™×¨×•×ª</th>
                                            <th className="text-center">××—×•×–</th>
                                            <th className="text-center">××œ××™</th>
                                            <th className="text-center">×¡×™×‘×•×‘</th>
                                            <th className="text-center">×™×¢×“×¤×•×ª</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {abcAnalysis.map(item => (
                                            <tr key={item.ModelCode}>
                                                <td className="font-bold">{item.ModelCode}</td>
                                                <td>{item.ModelDesc}</td>
                                                <td>
                                                    <span className={`abc-badge ${item.abc.class}`}>{item.abc.label}</span>
                                                </td>
                                                <td className="text-center font-semibold">{item.TotalSales}</td>
                                                <td className="text-center">{Math.round(item.percent * 100)}%</td>
                                                <td className="text-center">{item.CurrentStock}</td>
                                                <td className="text-center">{Math.round(item.StockTurnover * 100)}%</td>
                                                <td className="text-center">
                                                    {item.abc.label === 'A' && 'âš ï¸ × ×™×”×•×œ ×§×¤×“× ×™'}
                                                    {item.abc.label === 'B' && 'ğŸ“Š × ×™×”×•×œ ×¨×’×™×œ'}
                                                    {item.abc.label === 'C' && 'ğŸ’¡ ×©×™××• ×œ×‘ ×œ×¡×•×¨×¡×˜×•×§'}
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    )}

                    {/* Top Sellers Tab */}
                    {activeTab === 'top-sellers' && (
                        <div className="grid-2">
                            <div className="card">
                                <h3 className="rec-title">ğŸ† ×”××›×™×¨×•×ª ×”××•×‘×™×œ×•×ª</h3>
                                <div>
                                    {topSellers.map((item, idx) => (
                                        <div key={item.ModelCode} className="item-row">
                                            <div className="item-number">{idx + 1}</div>
                                            <div className="item-flex-1">
                                                <div className="item-text">{item.ModelDesc}</div>
                                                <div className="item-subtext">{item.Color}</div>
                                            </div>
                                            <div className="item-right">
                                                <div className="item-sales">{item.TotalSales}</div>
                                                <span className={`abc-badge ${item.abc.class}`}>{item.abc.label}</span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="card">
                                <h3 className="rec-title">ğŸ’° ×”×¨×•×•×— ×”×’×‘×•×” ×‘×™×•×ª×¨</h3>
                                <div className="table-container">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>×¤×¨×™×˜</th>
                                                <th className="text-center">×¨×•×•×—</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {topProfit.map(item => (
                                                <tr key={item.ModelCode}>
                                                    <td className="font-semibold">{item.ModelCode}</td>
                                                    <td className="text-center text-green font-bold">{Math.round(item.totalProfit)}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Dead Stock Tab */}
                    {activeTab === 'dead-stock' && (
                        <div className="card">
                            <h3 className="rec-title">âš ï¸ ××œ××™ ××§×•×¤× - ×¤×¢×•×œ×•×ª ×“×—×•×¤×•×ª</h3>
                            <div className="table-container">
                                <table>
                                    <thead className="red-bg">
                                        <tr>
                                            <th>×§×•×“</th>
                                            <th>×©×</th>
                                            <th className="text-center">××œ××™</th>
                                            <th className="text-center">××›×™×¨×•×ª</th>
                                            <th className="text-center">×¡×™×‘×•×‘</th>
                                            <th className="text-center">×”××œ×¦×”</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {productsWithMetrics.filter(p => p.isDeadStock || p.isOverstock).map(item => (
                                            <tr key={item.ModelCode}>
                                                <td className="font-bold">{item.ModelCode}</td>
                                                <td>{item.ModelDesc}</td>
                                                <td className="text-center">
                                                    <span className="badge badge-red">{item.CurrentStock}</span>
                                                </td>
                                                <td className="text-center">{item.TotalSales}</td>
                                                <td className="text-center">{Math.round(item.StockTurnover * 100)}%</td>
                                                <td className="text-center">
                                                    {item.isDeadStock ? 'ğŸ”´ Clearance' : 'ğŸŸ  ×”×•×¨×“ ××—×™×¨'}
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    )}

                    {/* All Items Tab */}
                    {activeTab === 'all-items' && (
                        <div className="card">
                            <input
                                type="text"
                                placeholder="ğŸ” ×—×¤×© ×œ×¤×™ ×§×•×“, ×©× ××• ×¦×‘×¢..."
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                                className="search-box"
                            />

                            <div className="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>×§×•×“</th>
                                            <th>×ª×™××•×¨</th>
                                            <th className="text-center">××›×™×¨×•×ª</th>
                                            <th className="text-center">××œ××™</th>
                                            <th className="text-center">×™××™× × ×•×ª×¨×™×</th>
                                            <th className="text-center">×¡×™×‘×•×‘</th>
                                            <th className="text-center">ABC</th>
                                            <th className="text-center">×”×¢×¨×•×ª</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {filteredData.map(item => (
                                            <tr key={item.ModelCode}>
                                                <td className="font-bold">{item.ModelCode}</td>
                                                <td>{item.ModelDesc} - {item.Color || '×œ×œ× ×¦×‘×¢'}</td>
                                                <td className="text-center">{item.TotalSales}</td>
                                                <td className="text-center">
                                                    <span style={{ fontWeight: 700, color: item.CurrentStock < 30 ? '#dc2626' : '#334155' }}>
                                                        {item.CurrentStock}
                                                    </span>
                                                </td>
                                                <td className="text-center">
                                                    <span className={item.daysRemaining < 7 ? 'days-left red' : item.daysRemaining < 14 ? 'days-left orange' : 'days-left green'}>
                                                        {item.daysRemaining}
                                                    </span>
                                                </td>
                                                <td className="text-center">{Math.round(item.StockTurnover * 100)}%</td>
                                                <td className="text-center">
                                                    <span className={`abc-badge ${item.abc.class}`}>{item.abc.label}</span>
                                                </td>
                                                <td className="text-center text-sm">
                                                    {item.isUrgent && 'ğŸš¨ ×“×—×•×£'}
                                                    {item.isDeadStock && 'â„ï¸ ×§×¤×•×'}
                                                    {item.hasOpportunity && 'ğŸ’° ×”×–×”×‘'}
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                            <p className="text-sm mt-4" style={{ color: '#64748b' }}>
                                {filteredData.length} ×¤×¨×™×˜×™× ××•×¦×’×™×
                            </p>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<InventoryDashboard />);
    </script>
</body>
</html>
